!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.atari2600=e():t.atari2600=e()}(window,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=5)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),n=i(3),s=i(2),o=i(4),a=function(){function t(){}return t.A=0,t.PC=61440,t.S=255,t.X=0,t.Y=0,t}();e.Register=a;var u=function(){function t(){}return t.B=0,t.C=0,t.D=0,t.I=0,t.N=0,t.V=0,t.Z=0,t.U=0,t}();e.Flag=u;var h=function(){function t(){}return t.switchRom=function(t){for(var e=4096;e<65535;e+=8192)this.memory.set(this.banks[t],e)},t.get=function(t){return this.memory[t]},t.read=function(t){var e=this.memory[t];return void 0!==this[t]&&(e=this[t]()),e},t.readRom=function(t,e){this.banks=t,this.type=e,this.reset(),this.switchRom(0),a.PC=(255&this.memory[65533])<<8|255&this.memory[65532]},t.reset=function(){this.memory=new Uint8Array(65536),this.memory[60]=128,this.memory[61]=128},t.set=function(t,e){return this.memory[t]=e,this.memory[t]},t.write=function(t,e){return void 0!==this[t]&&(e=this[t](e)),this.memory[t]=e,this.memory[t]},t[0]=function(e){return void 0===e?this.memory[48]:(!(2&t.get(0))&&2&e&&(o.TIA.scanline=0),e)},t[1]=function(){return this.memory[49]},t[2]=function(t){return void 0===t?this.memory[50]:(n.CPU.lock(),t)},t[3]=function(){return this.memory[51]},t[4]=function(t){if(void 0===t)return this.memory[52];var e=s.Convert.toBin(t).split(""),i=parseInt(e[5]+e[6]+e[7],2);return o.TIA.p0.pixelRange=o.TIA.getPixelRange(i),o.TIA.p0.size=5==i||7==i?i%5+2:1,o.TIA.m0.size=Math.pow(2,2*parseInt(e[2])+parseInt(e[3])),t},t[5]=function(t){if(void 0===t)return this.memory[53];var e=s.Convert.toBin(t).split(""),i=parseInt(e[5]+e[6]+e[7],2);return o.TIA.p1.pixelRange=o.TIA.getPixelRange(i),o.TIA.p1.size=5==i||7==i?i%5+2:1,o.TIA.m1.size=Math.pow(2,2*parseInt(e[2])+parseInt(e[3])),t},t[6]=function(t){return void 0===t?this.memory[54]:(o.TIA.pf.colup0=o.TIA.p0.colup=o.TIA.m0.colup=o.TIA.colorPalette.get(254&t),t)},t[7]=function(t){return void 0===t?this.memory[55]:(o.TIA.pf.colup1=o.TIA.p1.colup=o.TIA.m1.colup=o.TIA.colorPalette.get(254&t),t)},t[8]=function(t){return void 0===t?this.memory[56]:(o.TIA.pf.colupf=o.TIA.ball.colupf=o.TIA.colorPalette.get(254&t),t)},t[9]=function(t){return void 0===t?this.memory[57]:(o.TIA.bk.colubk=o.TIA.colorPalette.get(254&t),t)},t[10]=function(t){if(void 0===t)return this.memory[58];var e=s.Convert.toBin(t).split("");return o.TIA.pf.reflect="1"==e[7],o.TIA.pf.scoreMode="1"==e[6]&&"0"==e[5],o.TIA.pfp="1"==e[5],o.TIA.ball.size=Math.pow(2,2*parseInt(e[2])+parseInt(e[3])),t},t[11]=function(t){return void 0===t?this.memory[59]:(o.TIA.p0.refp=(8&t)>0,t)},t[12]=function(t){return void 0===t?this.memory[60]:(o.TIA.p1.refp=(8&t)>0,t)},t[13]=function(t){return void 0===t?this.memory[61]:(o.TIA.pf.pf0=s.Convert.toBin(t).split("").reverse(),t)},t[14]=function(t){return void 0===t?this.memory[14]:(o.TIA.pf.pf1=s.Convert.toBin(t).split("").reverse(),t)},t[15]=function(t){return void 0===t?this.memory[15]:(o.TIA.pf.pf2=s.Convert.toBin(t).split("").reverse(),t)},t[16]=function(t){return void 0===t?this.memory[16]:(o.TIA.p0.position=o.TIA.clock<=68?3:o.TIA.clock-61,t)},t[17]=function(t){return void 0===t?this.memory[17]:(o.TIA.p1.position=o.TIA.clock<=68?3:o.TIA.clock-61,t)},t[18]=function(t){return void 0===t?this.memory[18]:(o.TIA.m0.position=o.TIA.clock<=68?2:o.TIA.clock-61,t)},t[19]=function(t){return void 0===t?this.memory[19]:(o.TIA.m1.position=o.TIA.clock<=68?2:o.TIA.clock-61,t)},t[20]=function(t){return void 0===t?this.memory[20]:(o.TIA.ball.position=o.TIA.clock<=68?2:o.TIA.clock-61,t)},t[27]=function(t){return void 0===t?this.memory[27]:(o.TIA.p1.prevGrp=o.TIA.p1.grp,o.TIA.p0.grp=s.Convert.toBin(t).split(""),t)},t[28]=function(t){return void 0===t?this.memory[28]:(o.TIA.p0.prevGrp=o.TIA.p0.grp,o.TIA.ball.prevEnabl=o.TIA.ball.enabl,o.TIA.p1.grp=s.Convert.toBin(t).split(""),t)},t[29]=function(t){return void 0===t?this.memory[29]:(o.TIA.m0.enam=(2&t)>0,t)},t[30]=function(t){return void 0===t?this.memory[30]:(o.TIA.m1.enam=(2&t)>0,t)},t[31]=function(t){return void 0===t?this.memory[31]:(o.TIA.ball.enabl=(2&t)>0,t)},t[32]=function(t){if(void 0===t)return this.memory[32];var e=s.Convert.toBin(t).split("");return o.TIA.p0.hmp=parseInt(e[1]+e[2]+e[3],2)-("1"==e[0]?8:0),t},t[33]=function(t){if(void 0===t)return this.memory[33];var e=s.Convert.toBin(t).split("");return o.TIA.p1.hmp=parseInt(e[1]+e[2]+e[3],2)-("1"==e[0]?8:0),t},t[34]=function(t){if(void 0===t)return this.memory[34];var e=s.Convert.toBin(t).split("");return o.TIA.m0.hmm=parseInt(e[1]+e[2]+e[3],2)-("1"==e[0]?8:0),t},t[35]=function(t){if(void 0===t)return this.memory[35];var e=s.Convert.toBin(t).split("");return o.TIA.m1.hmm=parseInt(e[1]+e[2]+e[3],2)-("1"==e[0]?8:0),t},t[36]=function(t){if(void 0===t)return this.memory[36];var e=s.Convert.toBin(t).split("");return o.TIA.ball.hmbl=parseInt(e[1]+e[2]+e[3],2)-("1"==e[0]?8:0),t},t[37]=function(t){return void 0===t?this.memory[37]:(o.TIA.p0.vdelp=(1&t)>0,t)},t[38]=function(t){return void 0===t?this.memory[38]:(o.TIA.p1.vdelp=(1&t)>0,t)},t[39]=function(t){return void 0===t?this.memory[39]:(o.TIA.ball.vdelbl=(1&t)>0,t)},t[42]=function(t){return void 0===t?this.memory[42]:(o.TIA.p0.position=(o.TIA.p0.position-o.TIA.p0.hmp)%160,o.TIA.p1.position=(o.TIA.p1.position-o.TIA.p1.hmp)%160,o.TIA.m0.position=(o.TIA.m0.position-o.TIA.m0.hmm)%160,o.TIA.m1.position=(o.TIA.m1.position-o.TIA.m1.hmm)%160,o.TIA.ball.position=(o.TIA.ball.position-o.TIA.ball.hmbl)%160,t)},t[43]=function(t){return void 0===t?this.memory[43]:(this.memory[32]=this.memory[33]=this.memory[34]=this.memory[35]=this.memory[36]=0,o.TIA.p0.hmp=o.TIA.p1.hmp=o.TIA.m0.hmm=o.TIA.m1.hmm=o.TIA.ball.hmbl=0,t)},t[44]=function(t){return void 0===t?this.memory[44]:(this.memory[48]=this.memory[49]=this.memory[50]=this.memory[51]=this.memory[52]=this.memory[53]=this.memory[54]=this.memory[55]=0,t)},t[48]=function(){return this.memory[48]},t[49]=function(){return this.memory[49]},t[50]=function(){return this.memory[50]},t[51]=function(){return this.memory[51]},t[52]=function(){return this.memory[52]},t[53]=function(){return this.memory[53]},t[54]=function(){return this.memory[54]},t[55]=function(){return this.memory[55]},t[56]=function(){return this.memory[56]},t[57]=function(){return this.memory[57]},t[58]=function(){return this.memory[58]},t[59]=function(){return this.memory[59]},t[60]=function(){return this.memory[60]},t[61]=function(){return this.memory[61]},t[640]=function(t){if(t)return this.swchaW=t,t;for(var e=s.Convert.toBin(this.memory[641]).split(""),i=s.Convert.toBin(this.swchaW).split(""),r=s.Convert.toBin(this.swchaR).split(""),n=0;n<8;n++)"1"==e[n]&&(r[n]=i[n]);return parseInt(r.join(""),2)},t[642]=function(t){if(t)return this.swchbW=t,t;for(var e=s.Convert.toBin(this.memory[643]).split(""),i=s.Convert.toBin(this.swchbW).split(""),r=s.Convert.toBin(this.swchbR).split(""),n=0;n<8;n++)"1"==e[n]&&(r[n]=i[n]);return parseInt(r.join(""),2)},t[644]=function(){return r.PIA.timer||(r.PIA.timer=r.PIA.prevTimer||662,r.PIA.cycle=r.PIA.timerIntervals[r.PIA.prevTimer||662]),this.memory[644]},t[645]=function(){var t=s.Convert.toBin(this.memory[645]).split("");return t[1]="0",this.memory[645]=parseInt(t.join(""),2),this.memory[645]},t[660]=function(t){if(void 0===t)return this.memory[660];var e=s.Convert.toBin(this.memory[645]).split("");return t=new Uint8Array([t-1])[0],e[0]="0",this.memory[660]=t,r.PIA.setTimer(660),t},t[661]=function(t){if(void 0===t)return this.memory[661];var e=s.Convert.toBin(this.memory[645]).split("");return t=new Uint8Array([t-1])[0],e[0]="0",this.memory[661]=t,r.PIA.setTimer(661),t},t[662]=function(t){if(void 0===t)return this.memory[662];var e=s.Convert.toBin(this.memory[645]).split("");return t=new Uint8Array([t-1])[0],e[0]="0",this.memory[662]=t,r.PIA.setTimer(662),t},t[663]=function(t){if(void 0===t)return this.memory[663];var e=s.Convert.toBin(this.memory[645]).split("");return t=new Uint8Array([t-1])[0],e[0]="0",this.memory[663]=t,r.PIA.setTimer(663),t},t[65524]=function(t){switch(this.type){case"32KB":this.switchRom(0)}return t||this.memory[65524]},t[65525]=function(t){switch(this.type){case"32KB":this.switchRom(1)}return t||this.memory[65525]},t[65526]=function(t){switch(this.type){case"16KB":this.switchRom(0);break;case"32KB":this.switchRom(2)}return t||this.memory[65526]},t[65527]=function(t){switch(this.type){case"16KB":this.switchRom(1);break;case"32KB":this.switchRom(3)}return t||this.memory[65527]},t[65528]=function(t){switch(this.type){case"8KB":case"12KB":this.switchRom(0);break;case"16KB":this.switchRom(2);break;case"32KB":this.switchRom(4)}return t||this.memory[65528]},t[65529]=function(t){switch(this.type){case"8KB":case"12KB":this.switchRom(1);break;case"16KB":this.switchRom(3);break;case"32KB":this.switchRom(5)}return t||this.memory[65529]},t[65530]=function(t){switch(this.type){case"12KB":this.switchRom(2);break;case"32KB":this.switchRom(6)}return t||this.memory[65530]},t[65531]=function(t){switch(this.type){case"32KB":this.switchRom(7)}return t||this.memory[65531]},t.banks=[],t.type="",t.memory=new Uint8Array(65536),t.swchaW=0,t.swchaR=255,t.swchbW=0,t.swchbR=63,t}();e.RAM=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(2),s=function(){function t(){}return t.keydown=function(t){var e=t.keyCode,i=n.Convert.toBin(r.RAM.swchaR).split(""),s=n.Convert.toBin(r.RAM.swchbR).split(""),o=n.Convert.toBin(r.RAM.get(60)).split(""),a=n.Convert.toBin(r.RAM.get(61)).split("");t.preventDefault(),t.stopPropagation(),38==e?i[3]="0":39==e?i[0]="0":40==e?i[2]="0":37==e?i[1]="0":17==e?o[0]="0":87==e?i[7]="0":65==e?i[5]="0":83==e?i[6]="0":68==e?i[4]="0":16==e?a[0]="0":191==e?s[7]="0"==s[7]?"1":"0":190==e?s[6]="0"==s[6]?"1":"0":78==e?s[1]="0"==s[1]?"1":"0":77==e&&(s[0]="0"==s[0]?"1":"0"),r.RAM.swchaR=parseInt(i.join(""),2),r.RAM.swchbR=parseInt(s.join(""),2),r.RAM.set(60,parseInt(o.join(""),2)),r.RAM.set(61,parseInt(a.join(""),2))},t.keyup=function(t){r.RAM.swchaR=255,r.RAM.swchbR=255,r.RAM.set(640,255),r.RAM.set(642,255),r.RAM.set(60,255),r.RAM.set(61,255)},t.initInputs=function(){document.addEventListener("keydown",this.keydown,!1),document.addEventListener("keyup",this.keyup,!1)},t.setTimer=function(t){this.timer=t,this.cycle=this.timerIntervals[t],r.RAM.set(644,r.RAM.get(t))},t.tick=function(){for(var t=660;t<=663;t++)if(this.timer==t&&this.timer&&0==this.cycle){var e=r.RAM.get(644),i=r.RAM.set(644,r.RAM.get(644)-1);this.cycle=this.timerIntervals[t],0==e&&255==i&&(this.prevTimer=t,this.timer=null,this.cycle=0,r.RAM.set(645,192))}this.cycle--},t.prevTimer=null,t.timer=null,t.cycle=0,t.timerIntervals={660:1,661:8,662:64,663:1024},t}();e.PIA=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.toInt8=function(t){return new Int8Array([t])[0]},t.toUint8=function(t){return 255&t},t.toBCD=function(t){return Math.abs(t/10<<4|t%10)%100},t.toDecBCD=function(t){return 10*(t>>4)+(15&t)},t.toBin=function(t){return("00000000"+(t>>>0).toString(2)).slice(-8)},t}();e.Convert=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(7),s=i(1),o=function(){function t(){}return t.lock=function(){this._locked=!0},t.unlock=function(){this._locked=!1},t.pulse=function(){if(s.PIA.tick(),this._locked)return!1;if(this._cycle<=0){try{this._cycle=n.Opcode[r.RAM.get(r.Register.PC)]()}catch(t){throw console.log("Error",r.RAM.get(r.Register.PC).toString(16),r.Register.PC.toString(16)),t}r.Register.PC++}this._cycle--},t._locked=!1,t._cycle=0,t}();e.CPU=o},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),o=i(3),a=function(){function t(){this.imageData=new ImageData(160,220)}return t.prototype.setImageData=function(t,e,i,r){var n=160*e+i<<2;return this.imageData.data[n]=t.data[n]=r[0],this.imageData.data[n+1]=t.data[n+1]=r[1],this.imageData.data[n+2]=t.data[n+2]=r[2],this.imageData.data[n+3]=t.data[n+3]=255,this.imageData},t}(),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colubk=[0,0,0],e}return n(e,t),e.prototype.pixel=function(t,e,i){return this.setImageData(t,e,i,this.colubk)},e}(a),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.reflect=!1,e.colupf=[0,0,0],e.scoreMode=!1,e.colup0=[0,0,0],e.colup1=[0,0,0],e.pf0=["0","0","0","0","0","0","0","0"],e.pf1=["0","0","0","0","0","0","0","0"],e.pf2=["0","0","0","0","0","0","0","0"],e}return n(e,t),e.prototype.pixel=function(t,e,i){var r=null;if(i<=16){for(var n=4;n<=16;n+=4)if(i<=n){"1"==this.pf0[4+n/4-1]&&(r=this.scoreMode?this.colup0:this.colupf);break}}else if(i>16&&i<=48){for(n=20;n<=48;n+=4)if(i<=n){"1"==this.pf1[7-(n/4-5)]&&(r=this.scoreMode?this.colup0:this.colupf);break}}else if(i>48&&i<=80){for(n=52;n<=80;n+=4)if(i<=n){"1"==this.pf2[n/4-13+0]&&(r=this.scoreMode?this.colup0:this.colupf);break}}else if(i>80&&i<=96&&!this.reflect){for(n=84;n<=96;n+=4)if(i<=n){"1"==this.pf0[4+n/4-21]&&(r=this.scoreMode?this.colup1:this.colupf);break}}else if(i>96&&i<=128&&!this.reflect){for(n=100;n<=128;n+=4)if(i<=n){"1"==this.pf1[7-(n/4-25)]&&(r=this.scoreMode?this.colup1:this.colupf);break}}else if(i>128&&i<=160&&!this.reflect){for(n=132;n<=160;n+=4)if(i<=n){"1"==this.pf2[n/4-33+0]&&(r=this.scoreMode?this.colup1:this.colupf);break}}else if(i>80&&i<=112&&this.reflect){for(n=84;n<=112;n+=4)if(i<=n){"1"==this.pf2[7-(n/4-21)]&&(r=this.scoreMode?this.colup1:this.colupf);break}}else if(i>112&&i<=144&&this.reflect){for(n=116;n<=144;n+=4)if(i<=n){"1"==this.pf1[n/4-29+0]&&(r=this.scoreMode?this.colup1:this.colupf);break}}else if(i>144&&i<=160&&this.reflect)for(n=148;n<=160;n+=4)if(i<=n){"1"==this.pf0[7-(n/4-37)]&&(r=this.scoreMode?this.colup1:this.colupf);break}return r?this.setImageData(t,e,i,r):null},e}(a),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colupf=[0,0,0],e.prevEnabl=!1,e.enabl=!1,e.hmbl=0,e.position=null,e.size=1,e.vdelbl=!1,e}return n(e,t),e.prototype.pixel=function(t,e,i){if((this.vdelbl?this.prevEnabl:this.enabl)&&i>=this.position&&i<this.position+this.size)return this.setImageData(t,e,i,this.colupf)},e}(a),c=function(t){function e(e){var i=t.call(this)||this;return i.colup=[0,0,0],i.missile=0,i.hmm=0,i.enam=!1,i.size=0,i.position=null,i.missile=e,i}return n(e,t),e.prototype.pixel=function(t,e,i){if(this.enam&&i>=this.position&&i<this.position+this.size)return this.setImageData(t,e,i,this.colup)},e}(a),R=function(t){function e(e){void 0===e&&(e=0);var i=t.call(this)||this;return i.colup=[0,0,0],i.grp=["0","0","0","0","0","0","0","0"],i.prevGrp=["0","0","0","0","0","0","0","0"],i.hmp=0,i.nusiz=0,i.player=0,i.position=null,i.refp=!1,i.vdelp=!1,i.pixelRange=[0],i.size=1,i.player=e,i.position=80*e,i}return n(e,t),e.prototype.pixel=function(t,e,i){var r=this.vdelp?this.prevGrp:this.grp,n=((i-this.position)/this.size>>0)%8;n=this.refp?7-n:n;for(var s=0,o=this.pixelRange;s<o.length;s++){var a=o[s],u=this.position+a;if(i>=u&&i<u+8&&"1"==r[n])return this.setImageData(t,e,i,this.colup)}},e}(a),f=function(){function t(){}return Object.defineProperty(t,"canvas",{set:function(t){this._canvas=t,this._canvas.width=160,this._canvas.height=222,this.ctx=t.getContext("2d"),this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this._canvas.width,this._canvas.height),this.imageData=this.ctx.createImageData(this._canvas.width,this._canvas.height)},enumerable:!0,configurable:!0}),t.checkCollisions=function(t){var e=this.ball.imageData.data,i=this.pf.imageData.data,r=this.p0.imageData.data,n=this.p1.imageData.data,o=this.m0.imageData.data,a=this.m1.imageData.data;255==o[t+3]&&255==n[t+3]&&s.RAM.set(48,128|s.RAM.get(48)),255==o[t+3]&&255==r[t+3]&&s.RAM.set(48,64|s.RAM.get(48)),255==a[t+3]&&255==r[t+3]&&s.RAM.set(49,128|s.RAM.get(49)),255==a[t+3]&&255==n[t+3]&&s.RAM.set(49,64|s.RAM.get(49)),255==r[t+3]&&255==i[t+3]&&s.RAM.set(50,128|s.RAM.get(50)),255==r[t+3]&&255==e[t+3]&&s.RAM.set(50,64|s.RAM.get(50)),255==n[t+3]&&255==i[t+3]&&s.RAM.set(51,128|s.RAM.get(51)),255==n[t+3]&&255==e[t+3]&&s.RAM.set(51,64|s.RAM.get(51)),255==o[t+3]&&255==i[t+3]&&s.RAM.set(52,128|s.RAM.get(52)),255==o[t+3]&&255==e[t+3]&&s.RAM.set(52,64|s.RAM.get(52)),255==a[t+3]&&255==i[t+3]&&s.RAM.set(53,128|s.RAM.get(53)),255==a[t+3]&&255==e[t+3]&&s.RAM.set(53,64|s.RAM.get(53)),255==e[t+3]&&255==i[t+3]&&s.RAM.set(54,128|s.RAM.get(54)),255==r[t+3]&&255==n[t+3]&&s.RAM.set(55,128|s.RAM.get(55)),255==o[t+3]&&255==a[t+3]&&s.RAM.set(55,64|s.RAM.get(55))},t.draw=function(){this.ctx.putImageData(this.imageData,0,0)},t.nextFrame=function(){var t=this;return new Promise(function(e){for(var i=0;i<262;){for(t.clock=0;t.clock<68;t.clock+=3)o.CPU.pulse();var r=2;for(t.clock=68;t.clock<228;t.clock+=1)r>2&&(r=0,o.CPU.pulse()),r++,t.scanline>30&&t.scanline<252&&t.pixel(t.scanline-30,t.clock-68);o.CPU.unlock(),i++,t.scanline++}t.draw(),t.resetCanvases(),e(!0)})},t.pixel=function(t,e){if(this.pfp)return this.bk.pixel(this.imageData,t,e),this.p1.pixel(this.imageData,t,e),this.m1.pixel(this.imageData,t,e),this.p0.pixel(this.imageData,t,e),this.m0.pixel(this.imageData,t,e),this.pf.pixel(this.imageData,t,e),this.ball.pixel(this.imageData,t,e),void this.checkCollisions(t*this._canvas.width+e<<2);this.bk.pixel(this.imageData,t,e),this.pf.pixel(this.imageData,t,e),this.ball.pixel(this.imageData,t,e),this.p0.pixel(this.imageData,t,e),this.m0.pixel(this.imageData,t,e),this.p1.pixel(this.imageData,t,e),this.m1.pixel(this.imageData,t,e),this.checkCollisions(t*this._canvas.width+e<<2)},t.getPixelRange=function(t){var e=[0];switch(t){case 1:e=[0,16];break;case 2:e=[0,32];break;case 3:e=[0,16,32];break;case 4:e=[0,72];break;case 5:e=[0,8];break;case 6:e=[0,32,72];break;case 7:e=[0,8,16,24]}return e},t.resetCanvases=function(){this.imageData=new ImageData(this._canvas.width,this._canvas.height),t.bk.imageData=new ImageData(this._canvas.width,this._canvas.height),t.pf.imageData=new ImageData(this._canvas.width,this._canvas.height),t.p0.imageData=new ImageData(this._canvas.width,this._canvas.height),t.p1.imageData=new ImageData(this._canvas.width,this._canvas.height),t.m0.imageData=new ImageData(this._canvas.width,this._canvas.height),t.m1.imageData=new ImageData(this._canvas.width,this._canvas.height),t.ball.imageData=new ImageData(this._canvas.width,this._canvas.height)},t._canvas=null,t.ball=new g,t.bk=new u,t.clock=0,t.colorPalette=null,t.ctx=null,t.imageData=null,t.expectNewFrame=!1,t.m0=new c(0),t.m1=new c(1),t.nusiz0=["0","0","0","0","0","0","0","0"],t.nusiz1=["0","0","0","0","0","0","0","0"],t.p0=new R(0),t.p1=new R(1),t.pf=new h,t.pfp=!1,t.scanline=0,t}();e.TIA=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),n=i(0),s=i(4),o=i(1),a=i(8),u=function(){function t(t,e){void 0===e&&(e={}),this.handleRom=this.handleRom.bind(this),this.onCanvasDrop=this.onCanvasDrop.bind(this),t.style.imageRendering=e.imageRendering||"pixelated",t.addEventListener("dragover",function(t){return t.preventDefault()}),t.addEventListener("drop",this.onCanvasDrop),s.TIA.colorPalette=new Map(a.Colors[e.colors]||a.Colors.NTSC),s.TIA.canvas=t,o.PIA.initInputs()}return t.prototype.handleRom=function(){var t=this;s.TIA.nextFrame().then(function(){requestAnimationFrame(t.handleRom),console.log("NEW FRAME")})},t.prototype.onCanvasDrop=function(t){t.preventDefault(),t.stopPropagation(),this.processFile(t.dataTransfer.files[0])},t.prototype.processFile=function(t){var e=this;console.log("Reading process started!");new r.RomReader(t,function(t,i){n.RAM.readRom(t,i),e.handleRom()})},t}();e.App=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.reader=new FileReader,this.onRomLoadEnd=this.onRomLoadEnd.bind(this),this.callback=e,this.reader.onloadend=this.onRomLoadEnd,this.reader.readAsArrayBuffer(t)}return t.prototype.determineRomType=function(t){switch(t.length){case 1024:return"1KB";case 2048:return"2KB";case 4096:return"4KB";case 8192:return"8KB";case 12288:return"12KB";case 16384:return"16KB";case 32768:return"32KB";default:return}},t.prototype.onRomLoadEnd=function(t){for(var e=new Uint8Array(t.target.result),i=e.length,r=[],n=this.determineRomType(e),s=i;s<4096;s+=i){var o=e;(e=new Uint8Array(s+i)).set(o,0),e.set(new Uint8Array(t.target.result),s)}for(s=0;s<e.length;s+=4096)r.push(new Uint8Array(e.buffer,s,4096));this.callback(r,n)},t}();e.RomReader=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=i(2),s=function(){function t(){}return t.isNextPage=function(t,e){return t>>8!=e>>8},t.isZero=function(t){return 0==t?1:0},t.isNegative=function(t){return n.Convert.toInt8(t)<0?1:0},t.ADC=function(t){var e=r.Register.A,i=null;r.Flag.D?(i=n.Convert.toDecBCD(r.Register.A)+r.Flag.C+n.Convert.toDecBCD(t),r.Flag.C=i>99?1:0):(i=r.Register.A+r.Flag.C+t,r.Flag.C=i>255?1:0),r.Register.A=n.Convert.toUint8(i),r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A),r.Flag.V=(~(e^r.RAM.get(r.Register.PC))&(e^r.Register.A)&128)==r.Register.A?1:0},t.AND=function(t){r.Register.A=r.Register.A&t,r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A)},t.ASL=function(t){var e=r.RAM.read(t),i=n.Convert.toBin(e).charAt(0);e=n.Convert.toUint8(e<<1),r.RAM.write(t,e),r.Flag.Z=this.isZero(e),r.Flag.N=this.isNegative(e),r.Flag.C=parseInt(i)},t.CMP=function(t,e){r.Flag.Z=r.Register[t]==e?1:0,r.Flag.N=this.isNegative(r.Register[t]-e),r.Flag.C=r.Register[t]-e>=0?1:0},t.CJMP=function(t,e){if(r.Flag[t]==e)return r.Register.PC++,2;var i=n.Convert.toInt8(r.RAM.get(++r.Register.PC));return 3+(this.isNextPage(r.Register.PC,r.Register.PC+=i)?1:0)},t.DEC=function(t){var e=r.RAM.write(t,r.RAM.get(t)-1);r.Flag.Z=this.isZero(e),r.Flag.N=this.isNegative(e)},t.EOR=function(t){r.Register.A=r.Register.A^t,r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A)},t.INC=function(t){var e=r.RAM.write(t,r.RAM.get(t)+1);r.Flag.Z=this.isZero(e),r.Flag.N=this.isNegative(e)},t.LD=function(t,e){r.Register[t]=r.RAM.read(e),r.Flag.Z=this.isZero(r.Register[t]),r.Flag.N=this.isNegative(r.Register[t])},t.LSR=function(t){var e=r.RAM.read(t),i=n.Convert.toBin(e).charAt(7);e=n.Convert.toUint8(e>>>1),r.RAM.write(t,e),r.Flag.Z=0,r.Flag.N=this.isNegative(e),r.Flag.C=parseInt(i)},t.next2BYTES=function(){var t=r.RAM.get(++r.Register.PC);return(255&r.RAM.get(++r.Register.PC))<<8|255&t},t.ORA=function(t){r.Register.A=r.Register.A|t,r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A)},t.ROL=function(t){var e=r.RAM.read(t),i=n.Convert.toBin(e).charAt(0);e=n.Convert.toUint8(e<<1);var s=n.Convert.toBin(e).slice(0,-1)+r.Flag.C.toString();r.RAM.write(t,parseInt(s,2)),r.Flag.Z=this.isZero(r.RAM.get(t)),r.Flag.N=this.isNegative(r.RAM.get(t)),r.Flag.C=parseInt(i)},t.ROR=function(t){var e=r.RAM.read(t),i=n.Convert.toBin(e).charAt(7),s=n.Convert.toUint8(e>>>1),o=r.Flag.C.toString()+n.Convert.toBin(s).substring(1);r.RAM.write(t,parseInt(o,2)),r.Flag.Z=this.isZero(r.RAM.get(t)),r.Flag.N=this.isNegative(r.RAM.get(t)),r.Flag.C=parseInt(i)},t.POP=function(){return r.Register.S=r.Register.S+1&255,r.RAM.get(r.Register.S)},t.PUSH=function(t){r.RAM.set(r.Register.S,t),r.Register.S=r.Register.S-1&255},t.WORD=function(t){return(255&r.RAM.read(t+1))<<8|255&r.RAM.read(t)},t[0]=function(){r.Flag.B=1;var t=parseInt(""+r.Flag.N+r.Flag.V+r.Flag.U+r.Flag.B+r.Flag.D+r.Flag.I+r.Flag.Z+r.Flag.C,2);return r.Flag.I=1,this.PUSH(r.Register.PC+1>>8),this.PUSH(r.Register.PC+1),this.PUSH(t),r.Register.PC=this.WORD(65534),7},t[1]=function(){return this.ORA(r.RAM.read(this.WORD(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)))),6},t[4]=function(){return r.Register.PC++,3},t[5]=function(){return this.ORA(r.RAM.read(r.RAM.get(++r.Register.PC))),3},t[6]=function(){return this.ASL(r.RAM.get(++r.Register.PC)),5},t[8]=function(){var t=parseInt(""+r.Flag.N+r.Flag.V+"11"+r.Flag.D+r.Flag.I+r.Flag.Z+r.Flag.C,2);return this.PUSH(t),3},t[9]=function(){return this.ORA(r.RAM.get(++r.Register.PC)),2},t[10]=function(){var t=n.Convert.toBin(r.Register.A).charAt(0);return r.Register.A=n.Convert.toUint8(r.Register.A<<1),r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A),r.Flag.C=parseInt(t),2},t[12]=function(){return this.next2BYTES(),4},t[13]=function(){return this.ORA(r.RAM.read(this.next2BYTES())),4},t[14]=function(){return this.ASL(this.next2BYTES()),6},t[16]=function(){return this.CJMP("N",!0)},t[17]=function(){var t=this.WORD(r.RAM.get(++r.Register.PC));return this.ORA(r.RAM.read(t+r.Register.Y)),5+(this.isNextPage(t,t+r.Register.Y)?1:0)},t[20]=function(){return r.Register.PC++,4},t[21]=function(){return this.ORA(r.RAM.read(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X))),4},t[22]=function(){return this.ASL(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)),6},t[24]=function(){return r.Flag.C=0,2},t[25]=function(){var t=this.next2BYTES();return this.ORA(r.RAM.read(t+r.Register.Y&65535)),4+(this.isNextPage(t,t+r.Register.Y&65535)?1:0)},t[28]=function(){var t=this.next2BYTES();return 4+(this.isNextPage(t,t+r.Register.X&65535)?1:0)},t[29]=function(){var t=this.next2BYTES();return this.ORA(r.RAM.read(t+r.Register.X&65535)),4+(this.isNextPage(t,t+r.Register.X&65535)?1:0)},t[30]=function(){return this.ASL(this.next2BYTES()+r.Register.X&65535),7},t[32]=function(){var t=this.next2BYTES();return this.PUSH(r.Register.PC>>8),this.PUSH(r.Register.PC),r.Register.PC=t-1,6},t[33]=function(){return this.AND(r.RAM.read(this.WORD(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)))),6},t[36]=function(){var t=r.RAM.read(r.RAM.get(++r.Register.PC)),e=n.Convert.toBin(t);return r.Flag.Z=this.isZero(r.Register.A&t),r.Flag.N="1"==e.charAt(0)?1:0,r.Flag.V="1"==e.charAt(1)?1:0,3},t[37]=function(){return this.AND(r.RAM.read(r.RAM.get(++r.Register.PC))),3},t[38]=function(){return this.ROL(r.RAM.get(++r.Register.PC)),5},t[40]=function(){var t=n.Convert.toBin(this.POP()).split("");return r.Flag.N=parseInt(t[0]),r.Flag.V=parseInt(t[1]),r.Flag.B=parseInt(t[3]),r.Flag.D=parseInt(t[4]),r.Flag.I=parseInt(t[5]),r.Flag.Z=parseInt(t[6]),r.Flag.C=parseInt(t[7]),4},t[41]=function(){return this.AND(r.RAM.get(++r.Register.PC)),2},t[42]=function(){var t=r.Register.A,e=n.Convert.toBin(t).charAt(0);t=n.Convert.toUint8(t<<1);var i=n.Convert.toBin(t).slice(0,-1)+r.Flag.C.toString();return t=n.Convert.toUint8(parseInt(i,2)),r.Register.A=t,r.Flag.Z=this.isZero(t),r.Flag.N=this.isNegative(t),r.Flag.C=parseInt(e),2},t[44]=function(){var t=r.RAM.read(this.next2BYTES()),e=n.Convert.toBin(t);return r.Flag.Z=this.isZero(r.Register.A&t),r.Flag.N="1"==e.charAt(0)?1:0,r.Flag.V="1"==e.charAt(1)?1:0,4},t[45]=function(){return this.AND(r.RAM.read(this.next2BYTES())),4},t[46]=function(){return this.ROL(this.next2BYTES()),6},t[48]=function(){return this.CJMP("N",!1)},t[49]=function(){var t=this.WORD(r.RAM.get(++r.Register.PC));return this.AND(r.RAM.read(t+r.Register.Y)),5+(this.isNextPage(t,t+r.Register.Y)?1:0)},t[52]=function(){return this[20]()},t[53]=function(){return this.AND(r.RAM.read(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X))),4},t[54]=function(){return this.ROL(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)),6},t[56]=function(){return r.Flag.C=1,2},t[57]=function(){var t=this.next2BYTES();return this.AND(r.RAM.read(t+r.Register.Y&65535)),4+(this.isNextPage(t,t+r.Register.Y&65535)?1:0)},t[60]=function(){return this[28]()},t[61]=function(){var t=this.next2BYTES();return this.AND(r.RAM.read(t+r.Register.X&65535)),4+(this.isNextPage(t,t+r.Register.X&65535)?1:0)},t[62]=function(){return this.ROL(this.next2BYTES()+r.Register.X&65535),7},t[64]=function(){var t=n.Convert.toBin(this.POP()).split("");return r.Register.PC=this.POP(),r.Register.PC+=this.POP()<<8,r.Flag.N=parseInt(t[0]),r.Flag.V=parseInt(t[1]),r.Flag.D=parseInt(t[4]),r.Flag.I=parseInt(t[5]),r.Flag.Z=parseInt(t[6]),r.Flag.C=parseInt(t[7]),6},t[65]=function(){return this.EOR(r.RAM.read(this.WORD(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)))),6},t[68]=function(){return this[4]()},t[69]=function(){return this.EOR(r.RAM.read(r.RAM.get(++r.Register.PC))),3},t[70]=function(){return this.LSR(r.RAM.get(++r.Register.PC)),5},t[72]=function(){return this.PUSH(r.Register.A),3},t[73]=function(){return this.EOR(r.RAM.get(++r.Register.PC)),2},t[74]=function(){var t=n.Convert.toBin(r.Register.A).charAt(7);return r.Register.A=n.Convert.toUint8(r.Register.A>>>1),r.Flag.Z=0,r.Flag.N=this.isNegative(r.Register.A),r.Flag.C=parseInt(t),2},t[75]=function(){var t=n.Convert.toBin(r.Register.A&r.RAM.get(++r.Register.PC));return r.Register.A=(r.Register.A&r.RAM.get(r.Register.PC))>>>1,r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A),r.Flag.C="1"==t.charAt(7)?1:0,2},t[76]=function(){var t=this.next2BYTES();return r.Register.PC=t-1,3},t[77]=function(){return this.EOR(r.RAM.read(this.next2BYTES())),4},t[78]=function(){return this.LSR(this.next2BYTES()),6},t[80]=function(){return this.CJMP("V",!0)},t[81]=function(){var t=this.WORD(r.RAM.get(++r.Register.PC));return this.EOR(r.RAM.read(t+r.Register.Y)),5+(this.isNextPage(t,t+r.Register.Y)?1:0)},t[84]=function(){return this[20]()},t[85]=function(){return this.EOR(r.RAM.read(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X))),4},t[86]=function(){return this.LSR(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)),6},t[88]=function(){return r.Flag.I=0,2},t[89]=function(){var t=this.next2BYTES();return this.EOR(r.RAM.read(t+r.Register.Y&65535)),4+(this.isNextPage(t,t+r.Register.Y&65535)?1:0)},t[92]=function(){return this[28]()},t[93]=function(){var t=this.next2BYTES();return this.EOR(r.RAM.read(t+r.Register.X&65535)),4+(this.isNextPage(t,t+r.Register.X&65535)?1:0)},t[94]=function(){return this.LSR(this.next2BYTES()+r.Register.X&65535),7},t[96]=function(){return r.Register.PC=this.POP(),r.Register.PC+=this.POP()<<8,6},t[100]=function(){return this[4]()},t[101]=function(){return this.ADC(r.RAM.read(r.RAM.get(++r.Register.PC))),3},t[102]=function(){return this.ROR(r.RAM.get(++r.Register.PC)),5},t[104]=function(){return r.Register.A=this.POP(),r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A),4},t[105]=function(){return this.ADC(r.RAM.get(++r.Register.PC)),2},t[106]=function(){var t=n.Convert.toBin(r.Register.A).charAt(7),e=n.Convert.toUint8(r.Register.A>>>1),i=r.Flag.C.toString()+n.Convert.toBin(e).substring(1);return r.Register.A=n.Convert.toUint8(parseInt(i,2)),r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A),r.Flag.C=parseInt(t),2},t[108]=function(){var t=this.next2BYTES(),e=r.RAM.read(t),i=(255&(255==(255&t)?r.RAM.read(t-255):r.RAM.read(t+1)))<<8|255&e;return r.Register.PC=i-1,5},t[109]=function(){return this.ADC(r.RAM.read(this.next2BYTES())),4},t[110]=function(){return this.ROR(this.next2BYTES()),6},t[112]=function(){return this.CJMP("V",!1)},t[113]=function(){var t=this.WORD(r.RAM.get(++r.Register.PC));return this.ADC(r.RAM.read(t+r.Register.Y)),5+(this.isNextPage(t,t+r.Register.Y)?1:0)},t[116]=function(){return this[20]()},t[117]=function(){return this.ADC(r.RAM.read(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X))),4},t[118]=function(){return this.ROR(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)),6},t[120]=function(){return r.Flag.I=1,2},t[121]=function(){var t=this.next2BYTES();return this.ADC(r.RAM.read(t+r.Register.Y&65535)),4+(this.isNextPage(t,t+r.Register.Y&65535)?1:0)},t[124]=function(){return this[28]()},t[125]=function(){var t=this.next2BYTES();return this.ADC(r.RAM.read(t+r.Register.X&65535)),4+(this.isNextPage(t,t+r.Register.X&65535)?1:0)},t[126]=function(){return this.ROR(this.next2BYTES()+r.Register.X&65535),7},t[128]=function(){return r.Register.PC++,2},t[129]=function(){return r.RAM.write(r.RAM.read(this.WORD(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X))),r.Register.A),6},t[130]=function(){return this[128]()},t[132]=function(){return r.RAM.write(r.RAM.get(++r.Register.PC),r.Register.Y),3},t[133]=function(){return r.RAM.write(r.RAM.get(++r.Register.PC),r.Register.A),3},t[134]=function(){return r.RAM.write(r.RAM.get(++r.Register.PC),r.Register.X),3},t[136]=function(){return r.Register.Y=n.Convert.toUint8(r.Register.Y-1),r.Flag.Z=this.isZero(r.Register.Y),r.Flag.N=this.isNegative(r.Register.Y),2},t[137]=function(){return this[128]()},t[138]=function(){return r.Register.A=r.Register.X,r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A),2},t[140]=function(){return r.RAM.write(this.next2BYTES(),r.Register.Y),4},t[141]=function(){return r.RAM.write(this.next2BYTES(),r.Register.A),4},t[142]=function(){return r.RAM.write(this.next2BYTES(),r.Register.X),4},t[144]=function(){return this.CJMP("C",!0)},t[145]=function(){return r.RAM.write(this.WORD(r.RAM.get(++r.Register.PC))+r.Register.Y,r.Register.A),6},t[148]=function(){return r.RAM.write(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X),r.Register.Y),4},t[149]=function(){return r.RAM.write(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X),r.Register.A),4},t[150]=function(){return r.RAM.write(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.Y),r.Register.X),4},t[152]=function(){return r.Register.A=r.Register.Y,r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A),2},t[153]=function(){return r.RAM.write(this.next2BYTES()+r.Register.Y&65535,r.Register.A),5},t[154]=function(){return r.Register.S=r.Register.X,2},t[157]=function(){return r.RAM.write(this.next2BYTES()+r.Register.X&65535,r.Register.A),5},t[160]=function(){return this.LD("Y",++r.Register.PC),2},t[161]=function(){return this.LD("A",this.WORD(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X))),6},t[162]=function(){return this.LD("X",++r.Register.PC),2},t[164]=function(){return this.LD("Y",r.RAM.get(++r.Register.PC)),3},t[165]=function(){return this.LD("A",r.RAM.get(++r.Register.PC)),3},t[166]=function(){return this.LD("X",r.RAM.get(++r.Register.PC)),3},t[167]=function(){return r.Register.A=r.Register.X=r.RAM.read(r.RAM.get(++r.Register.PC)),r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A),3},t[168]=function(){return r.Register.Y=r.Register.A,r.Flag.Z=this.isZero(r.Register.Y),r.Flag.N=this.isNegative(r.Register.Y),2},t[169]=function(){return this.LD("A",++r.Register.PC),2},t[170]=function(){return r.Register.X=r.Register.A,r.Flag.Z=this.isZero(r.Register.X),r.Flag.N=this.isNegative(r.Register.X),2},t[172]=function(){return this.LD("Y",this.next2BYTES()),4},t[173]=function(){return this.LD("A",this.next2BYTES()),4},t[174]=function(){return this.LD("X",this.next2BYTES()),4},t[176]=function(){return this.CJMP("C",!1)},t[177]=function(){var t=this.WORD(r.RAM.get(++r.Register.PC));return this.LD("A",t+r.Register.Y),5+(this.isNextPage(t,t+r.Register.Y)?1:0)},t[179]=function(){var t=this.WORD(r.RAM.get(++r.Register.PC));return r.Register.A=r.Register.X=r.RAM.read(t+r.Register.Y),r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A),5+(this.isNextPage(t,t+r.Register.Y)?1:0)},t[180]=function(){return this.LD("Y",n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)),4},t[181]=function(){return this.LD("A",n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)),4},t[182]=function(){return this.LD("X",n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.Y)),4},t[183]=function(){return r.Register.A=r.Register.X=r.RAM.read(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.Y)),r.Flag.Z=this.isZero(r.Register.A),r.Flag.N=this.isNegative(r.Register.A),4},t[184]=function(){return r.Flag.V=0,2},t[185]=function(){var t=this.next2BYTES();return this.LD("A",t+r.Register.Y&65535),4+(this.isNextPage(t,t+r.Register.Y&65535)?1:0)},t[186]=function(){return r.Register.X=r.Register.S,r.Flag.Z=this.isZero(r.Register.X),r.Flag.N=this.isNegative(r.Register.X),2},t[188]=function(){var t=this.next2BYTES();return this.LD("Y",t+r.Register.X&65535),4+(this.isNextPage(t,t+r.Register.X&65535)?1:0)},t[189]=function(){var t=this.next2BYTES();return this.LD("A",t+r.Register.X&65535),4+(this.isNextPage(t,t+r.Register.X&65535)?1:0)},t[190]=function(){var t=this.next2BYTES();return this.LD("X",t+r.Register.Y&65535),4+(this.isNextPage(t,t+r.Register.Y&65535)?1:0)},t[192]=function(){return this.CMP("Y",r.RAM.get(++r.Register.PC)),2},t[193]=function(){return this.CMP("A",r.RAM.read(this.WORD(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)))),6},t[194]=function(){return this[128]()},t[196]=function(){return this.CMP("Y",r.RAM.read(r.RAM.get(++r.Register.PC))),3},t[197]=function(){return this.CMP("A",r.RAM.read(r.RAM.get(++r.Register.PC))),3},t[198]=function(){return this.DEC(r.RAM.get(++r.Register.PC)),5},t[199]=function(){var t=r.RAM.get(++r.Register.PC),e=r.RAM.write(t,r.RAM.get(t)-1);return r.Flag.Z=this.isZero(r.Register.A-e),r.Flag.N=this.isNegative(r.Register.A-e),r.Flag.C=r.Register.A-e>=0?1:0,5},t[200]=function(){return r.Register.Y=n.Convert.toUint8(r.Register.Y+1),r.Flag.Z=this.isZero(r.Register.Y),r.Flag.N=this.isNegative(r.Register.Y),2},t[201]=function(){return this.CMP("A",r.RAM.get(++r.Register.PC)),2},t[202]=function(){return r.Register.X=n.Convert.toUint8(r.Register.X-1),r.Flag.Z=this.isZero(r.Register.X),r.Flag.N=this.isNegative(r.Register.X),2},t[203]=function(){var t=r.RAM.get(++r.Register.PC),e=r.Register.X&r.Register.A;return r.Register.X=n.Convert.toUint8(e-t),r.Flag.Z=this.isZero(r.Register.X),r.Flag.N=this.isNegative(r.Register.X),r.Flag.C=e-t>=0?1:0,2},t[204]=function(){return this.CMP("Y",r.RAM.read(this.next2BYTES())),4},t[205]=function(){return this.CMP("A",r.RAM.read(this.next2BYTES())),4},t[206]=function(){return this.DEC(this.next2BYTES()),6},t[208]=function(){return this.CJMP("Z",!0)},t[209]=function(){var t=this.WORD(r.RAM.get(++r.Register.PC));return this.CMP("A",r.RAM.read(t+r.Register.Y)),5+(this.isNextPage(t,t+r.Register.Y)?1:0)},t[212]=function(){return this[20]()},t[213]=function(){return this.CMP("A",r.RAM.read(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X))),4},t[214]=function(){return this.DEC(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)),6},t[216]=function(){return r.Flag.D=0,2},t[217]=function(){var t=this.next2BYTES();return this.CMP("A",r.RAM.read(t+r.Register.Y&65535)),4+(this.isNextPage(t,t+r.Register.Y&65535)?1:0)},t[220]=function(){return this[28]()},t[221]=function(){var t=this.next2BYTES();return this.CMP("A",r.RAM.read(t+r.Register.X&65535)),4+(this.isNextPage(t,t+r.Register.X&65535)?1:0)},t[222]=function(){return this.DEC(this.next2BYTES()+r.Register.X&65535),7},t[224]=function(){return this.CMP("X",r.RAM.get(++r.Register.PC)),2},t[226]=function(){return this[128]()},t[228]=function(){return this.CMP("X",r.RAM.read(r.RAM.get(++r.Register.PC))),3},t[229]=function(){return this.ADC(n.Convert.toUint8(~r.RAM.read(r.RAM.get(++r.Register.PC)))),3},t[230]=function(){return this.INC(r.RAM.get(++r.Register.PC)),5},t[232]=function(){return r.Register.X=n.Convert.toUint8(r.Register.X+1),r.Flag.Z=this.isZero(r.Register.X),r.Flag.N=this.isNegative(r.Register.X),2},t[233]=function(){return this.ADC(n.Convert.toUint8(~r.RAM.get(++r.Register.PC))),2},t[234]=function(){return 2},t[236]=function(){return this.CMP("X",r.RAM.read(this.next2BYTES())),4},t[237]=function(){return this.ADC(n.Convert.toUint8(~r.RAM.read(this.next2BYTES()))),4},t[238]=function(){return this.INC(this.next2BYTES()),6},t[240]=function(){return this.CJMP("Z",!1)},t[244]=function(){return this[20]()},t[245]=function(){return this.ADC(n.Convert.toUint8(~r.RAM.read(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)))),4},t[246]=function(){return this.INC(n.Convert.toUint8(r.RAM.get(++r.Register.PC)+r.Register.X)),6},t[248]=function(){return r.Flag.D=1,2},t[249]=function(){var t=this.next2BYTES();return this.ADC(n.Convert.toUint8(~r.RAM.read(t+r.Register.Y&65535))),4+(this.isNextPage(t,t+r.Register.Y&65535)?1:0)},t[252]=function(){return this[28]()},t[253]=function(){var t=this.next2BYTES();return this.ADC(n.Convert.toUint8(~r.RAM.read(t+r.Register.X&65535))),4+(this.isNextPage(t,t+r.Register.X&65535)?1:0)},t[254]=function(){return this.INC(this.next2BYTES()+r.Register.X&65535),7},t}();e.Opcode=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return Object.defineProperty(t,"SECAM",{get:function(){for(var t=this._SECAM,e=16;e<255;e+=2)t.push([e,t[e%16][1]]);return t},enumerable:!0,configurable:!0}),t._SECAM=[[0,[0,0,0]],[2,[33,33,255]],[4,[240,60,121]],[6,[255,80,255]],[8,[127,255,0]],[10,[127,255,255]],[12,[255,255,63]],[14,[237,237,237]]],t.NTSC=[[0,[0,0,0]],[2,[26,26,26]],[4,[57,57,57]],[6,[91,91,91]],[8,[126,126,126]],[10,[162,162,162]],[12,[199,199,199]],[14,[237,237,237]],[16,[25,2,0]],[18,[58,31,0]],[20,[93,65,0]],[22,[130,100,0]],[24,[167,136,0]],[26,[204,172,0]],[28,[242,210,25]],[30,[254,250,64]],[32,[55,0,0]],[34,[94,8,0]],[36,[131,39,0]],[38,[169,73,0]],[40,[207,108,0]],[42,[245,143,23]],[44,[254,180,56]],[46,[254,223,111]],[48,[71,0,0]],[50,[115,0,0]],[52,[152,19,0]],[54,[190,50,22]],[56,[228,83,53]],[58,[254,118,87]],[60,[254,156,129]],[62,[254,198,187]],[64,[68,0,8]],[66,[111,0,31]],[68,[150,6,64]],[70,[187,36,98]],[72,[225,69,133]],[74,[254,103,170]],[76,[254,140,214]],[78,[254,183,246]],[80,[45,0,74]],[82,[87,0,103]],[84,[125,5,140]],[86,[161,34,177]],[88,[199,67,215]],[90,[237,101,254]],[92,[254,138,246]],[94,[254,181,247]],[96,[13,0,130]],[98,[51,0,162]],[100,[85,15,201]],[102,[120,45,240]],[104,[156,78,254]],[106,[195,114,254]],[108,[235,152,254]],[110,[254,192,249]],[112,[0,0,145]],[114,[10,5,189]],[116,[40,34,228]],[118,[72,66,254]],[120,[107,100,254]],[122,[144,138,254]],[124,[183,176,254]],[126,[223,216,254]],[128,[0,0,114]],[130,[0,28,171]],[132,[3,60,214]],[134,[32,94,253]],[136,[64,129,254]],[138,[100,166,254]],[140,[137,206,254]],[142,[176,246,254]],[144,[0,16,58]],[146,[0,49,110]],[148,[0,85,162]],[150,[5,121,200]],[152,[35,157,238]],[154,[68,194,254]],[156,[104,233,254]],[158,[143,254,254]],[160,[0,31,2]],[162,[0,67,38]],[164,[0,105,87]],[166,[0,141,122]],[168,[27,177,158]],[170,[59,215,195]],[172,[93,254,233]],[174,[134,254,254]],[176,[0,36,3]],[178,[0,74,5]],[180,[0,112,12]],[182,[9,149,43]],[184,[40,186,76]],[186,[73,224,110]],[188,[108,254,146]],[190,[151,254,181]],[192,[0,33,2]],[194,[0,70,4]],[196,[8,107,0]],[198,[40,144,0]],[200,[73,181,9]],[202,[107,219,40]],[204,[143,254,73]],[206,[187,254,105]],[208,[0,21,1]],[210,[16,54,0]],[212,[48,89,0]],[214,[83,126,0]],[216,[118,163,0]],[218,[154,200,0]],[220,[191,238,30]],[222,[232,254,62]],[224,[26,2,0]],[226,[59,31,0]],[228,[94,65,0]],[230,[131,100,0]],[232,[168,136,0]],[234,[206,173,0]],[236,[244,210,24]],[238,[254,250,64]],[240,[56,0,0]],[242,[95,8,0]],[244,[132,39,0]],[246,[170,73,0]],[248,[208,107,0]],[250,[246,143,24]],[252,[254,180,57]],[254,[254,223,112]]],t.PAL=[[0,[0,0,0]],[2,[26,26,26]],[4,[57,57,57]],[6,[91,91,91]],[8,[126,126,126]],[10,[162,162,162]],[12,[199,199,199]],[14,[237,237,237]],[16,[0,0,0]],[18,[26,26,26]],[20,[57,57,57]],[22,[91,91,91]],[24,[126,126,126]],[26,[162,162,162]],[28,[199,199,199]],[30,[237,237,237]],[32,[30,0,0]],[34,[63,28,0]],[36,[99,61,0]],[38,[136,96,0]],[40,[173,131,0]],[42,[210,168,6]],[44,[249,205,38]],[46,[254,246,74]],[48,[0,33,0]],[50,[0,70,0]],[52,[13,106,0]],[54,[45,144,0]],[56,[79,181,0]],[58,[113,218,6]],[60,[149,254,38]],[62,[192,254,77]],[64,[58,0,0]],[66,[98,6,0]],[68,[136,37,0]],[70,[173,69,0]],[72,[210,103,27]],[74,[249,139,59]],[76,[254,176,94]],[78,[254,219,135]],[80,[0,37,0]],[82,[0,75,0]],[84,[0,114,0]],[86,[13,150,0]],[88,[44,187,28]],[90,[78,225,61]],[92,[112,254,95]],[94,[156,254,138]],[96,[71,0,0]],[98,[114,0,7]],[100,[151,15,37]],[102,[189,46,69]],[104,[227,79,104]],[106,[254,114,141]],[108,[254,152,178]],[110,[254,194,221]],[112,[0,33,0]],[114,[0,69,5]],[116,[0,108,38]],[118,[0,144,70]],[120,[28,181,105]],[122,[61,216,140]],[124,[95,254,177]],[126,[136,254,221]],[128,[65,0,38]],[130,[108,0,79]],[132,[146,4,115]],[134,[184,34,152]],[136,[222,67,189]],[138,[254,101,227]],[140,[254,138,254]],[142,[254,182,254]],[144,[0,17,42]],[146,[0,52,79]],[148,[0,89,117]],[150,[4,124,154]],[152,[34,160,191]],[154,[67,197,229]],[156,[101,235,254]],[158,[140,254,254]],[160,[42,0,101]],[162,[83,0,146]],[164,[120,4,185]],[166,[156,34,224]],[168,[194,66,254]],[170,[232,101,254]],[172,[254,138,254]],[174,[254,182,254]],[176,[0,0,107]],[178,[0,31,148]],[180,[0,64,188]],[182,[29,98,226]],[184,[61,133,254]],[186,[95,169,254]],[188,[132,209,254]],[190,[171,249,254]],[192,[8,0,142]],[194,[45,0,188]],[196,[78,16,228]],[198,[113,47,254]],[200,[149,80,254]],[202,[187,117,254]],[204,[227,155,254]],[206,[254,194,254]],[208,[0,0,144]],[210,[6,8,189]],[212,[36,37,228]],[214,[68,69,254]],[216,[102,103,254]],[218,[139,141,254]],[220,[191,179,254]],[222,[232,216,254]],[224,[0,0,0]],[226,[26,26,26]],[228,[57,57,57]],[230,[91,91,91]],[232,[126,126,126]],[234,[162,162,162]],[236,[199,199,199]],[238,[237,237,237]],[240,[0,0,0]],[242,[26,26,26]],[244,[57,57,57]],[246,[91,91,91]],[248,[126,126,126]],[250,[162,162,162]],[252,[199,199,199]],[254,[237,237,237]]],t}();e.Colors=r}])});
